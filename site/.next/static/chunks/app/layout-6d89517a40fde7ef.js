(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{13673:()=>{},19396:(e,t,r)=>{Promise.resolve().then(r.bind(r,5379)),Promise.resolve().then(r.t.bind(r,13673,23)),Promise.resolve().then(r.bind(r,39747)),Promise.resolve().then(r.bind(r,98521))},39747:(e,t,r)=>{"use strict";r.d(t,{Header:()=>g});var a=r(95155),s=r(52619),n=r.n(s),l=r(20063),o=r(76445),i=r(5379),c=r(12115),d=r(89182),h=r(74623);function u(){let{theme:e,setTheme:t}=(0,i.D)(),[r,s]=(0,c.useState)(!1);return((0,c.useEffect)(()=>s(!0),[]),r)?(0,a.jsx)("button",{onClick:()=>t("dark"===e?"light":"dark"),className:"rounded-md p-2 text-gray-400 hover:bg-gray-800 hover:text-gray-200 transition-colors","aria-label":"Toggle theme",children:"dark"===e?(0,a.jsx)(d.A,{className:"h-5 w-5"}):(0,a.jsx)(h.A,{className:"h-5 w-5"})}):(0,a.jsx)("div",{className:"h-9 w-9"})}var x=r(41715);function m(){return(0,a.jsxs)("button",{onClick:()=>document.dispatchEvent(new CustomEvent("open-search-palette")),className:"flex items-center gap-2 rounded-md border border-gray-700 bg-gray-900 px-3 py-1.5 text-sm text-gray-400 hover:border-gray-600 hover:text-gray-300 transition-colors",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Search"}),(0,a.jsxs)("kbd",{className:"hidden rounded border border-gray-700 bg-gray-800 px-1.5 py-0.5 text-xs font-mono text-gray-500 sm:inline",children:["âŒ˜","K"]})]})}let b=[{href:"/",label:"Dashboard"},{href:"/books",label:"Books"},{href:"/libraries",label:"Libraries"},{href:"/map",label:"Map"},{href:"/categories",label:"Categories"},{href:"/about",label:"About"}];function g(){let e=(0,l.usePathname)();return(0,a.jsx)("header",{className:"sticky top-0 z-50 border-b border-gray-800 bg-gray-950/80 backdrop-blur-sm dark:border-gray-800 dark:bg-gray-950/80",children:(0,a.jsxs)("div",{className:"mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-8",children:[(0,a.jsx)(n(),{href:"/",className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:"Argus Panoptes"})}),(0,a.jsx)("nav",{className:"hidden items-center gap-1 md:flex",children:b.map(t=>{let r="/"===t.href?"/"===e:e.startsWith(t.href);return(0,a.jsx)(n(),{href:t.href,className:(0,o.cn)("rounded-md px-3 py-2 text-sm font-medium transition-colors",r?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800/50 hover:text-gray-200"),children:t.label},t.href)})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m,{}),(0,a.jsx)(u,{})]})]})})}},76445:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2821),s=r(75889);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},98521:(e,t,r)=>{"use strict";r.d(t,{SearchPalette:()=>b});var a=r(95155),s=r(12115),n=r(20063),l=r(93736),o=r(41715),i=r(77415),c=r(9015),d=r(88592);let h=null,u=[];async function x(){if(h)return h;let[e,t,r]=await Promise.all([fetch("/data/books.json"),fetch("/data/libraries.json"),fetch("/data/categories.json")]),a=await e.json(),s=await t.json(),n=await r.json();return u=[...a.map(e=>{var t;return{type:"book",id:e.isbn13,title:e.title,subtitle:(null==(t=e.authors)?void 0:t.join(", "))||"Unknown author",href:"/books/".concat(e.isbn13)}}),...s.map(e=>({type:"library",id:e.id,title:e.name,subtitle:[e.city,e.region].filter(Boolean).join(", "),href:"/libraries/".concat(e.id)})),...n.map(e=>({type:"category",id:e.slug,title:e.label,subtitle:"".concat(e.count," books"),href:"/categories/".concat(e.slug)}))],h=new l.A(u,{keys:["title","subtitle"],threshold:.3,minMatchCharLength:2})}let m={book:i.A,library:c.A,category:d.A};function b(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)(""),[i,c]=(0,s.useState)([]),[d,h]=(0,s.useState)(0),u=(0,s.useRef)(null),b=(0,n.useRouter)(),g=(0,s.useCallback)(()=>{t(!0),l(""),c([]),h(0)},[]),f=(0,s.useCallback)(()=>{t(!1),l(""),c([])},[]);function p(e){f(),b.push(e.href)}return((0,s.useEffect)(()=>{function e(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),g()),"Escape"===e.key&&f()}function t(){g()}return document.addEventListener("keydown",e),document.addEventListener("open-search-palette",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("open-search-palette",t)}},[g,f]),(0,s.useEffect)(()=>{e&&setTimeout(()=>{var e;return null==(e=u.current)?void 0:e.focus()},50)},[e]),(0,s.useEffect)(()=>{if(!r||r.length<2){c([]),h(0);return}x().then(e=>{c(e.search(r,{limit:12}).map(e=>e.item)),h(0)})},[r]),e)?(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-start justify-center pt-[20vh]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:f}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg rounded-xl border border-gray-700 bg-gray-900 shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 border-b border-gray-800 px-4 py-3",children:[(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-500"}),(0,a.jsx)("input",{ref:u,type:"text",value:r,onChange:e=>l(e.target.value),onKeyDown:function(e){"ArrowDown"===e.key?(e.preventDefault(),h(e=>Math.min(e+1,i.length-1))):"ArrowUp"===e.key?(e.preventDefault(),h(e=>Math.max(e-1,0))):"Enter"===e.key&&i[d]&&(e.preventDefault(),p(i[d]))},placeholder:"Search books, libraries, categories...",className:"flex-1 bg-transparent text-gray-200 placeholder-gray-500 outline-none"}),(0,a.jsx)("kbd",{className:"rounded border border-gray-700 bg-gray-800 px-1.5 py-0.5 text-xs font-mono text-gray-500",children:"ESC"})]}),i.length>0&&(0,a.jsx)("ul",{className:"max-h-[300px] overflow-y-auto p-2",children:i.map((e,t)=>{let r=m[e.type];return(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>p(e),onMouseEnter:()=>h(t),className:"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors ".concat(t===d?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800/50"),children:[(0,a.jsx)(r,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"truncate text-sm font-medium",children:e.title}),(0,a.jsx)("p",{className:"truncate text-xs text-gray-500",children:e.subtitle})]}),(0,a.jsx)("span",{className:"flex-shrink-0 text-xs text-gray-600 capitalize",children:e.type})]})},"".concat(e.type,"-").concat(e.id))})}),r.length>=2&&0===i.length&&(0,a.jsx)("div",{className:"p-8 text-center text-sm text-gray-500",children:"No results found"})]})]}):null}}},e=>{e.O(0,[978,619,909,493,441,255,358],()=>e(e.s=19396)),_N_E=e.O()}]);